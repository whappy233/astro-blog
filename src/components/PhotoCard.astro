---
import Link from '@/components/Link.astro'
import { formatDate } from '@/lib/utils'
import { Icon } from 'astro-icon/components'
import { Image } from 'astro:assets'
import type { CollectionEntry } from 'astro:content'

interface Props {
  gallery: CollectionEntry<'gallery'>
}

const { gallery } = Astro.props
---

<div
  class="hover:bg-secondary/50 rounded-xl border p-4 transition-colors duration-300 ease-in-out h-full"
>
  <Link href={`/gallery/${gallery.id}`} class="flex gap-4 flex-col justify-between h-full">
    {
      gallery.data.image && (
        <div class="sm:shrink-0 m-auto">
          <Image
            src={gallery.data.image}
            alt={gallery.data.name}
            width={150}
            height={150}
            class="object-cover"
          />
        </div>
      )
    }
    <div>
      <div class="text-muted-foreground flex mb-1 flex-wrap items-center gap-x-2 text-xs"> 
        <Icon name="lucide:calendar-days" class="size-4" />
        <span>{formatDate(gallery.data.date)}</span>
      </div>
      <h3 class="mb-1 text-lg font-medium">
        {gallery.data.name}
      </h3>
    </div>
  </Link>
</div>
